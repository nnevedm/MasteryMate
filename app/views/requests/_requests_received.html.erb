<div class="my-requests-box">
  <div class="pending-requests">
    <h3>Pending requests</h3>

    <div class="requests-table">

      <div class="titles">
        <p class="col1-size">Request</p>
        <p class="col2-size">Client</p>
        <p class="col3-size">Last update</p>
        <p class="col4-size">Status</p>
      </div>


      <div class="lines">
        <% counter = 0 %>

        <% @requests.each do |request| %>
          <% counter += 1 %>
          <% if counter % 2 == 1
            pair_or_impair = "impair"
          else
            pair_or_impair = "pair"
          end %>

          <% if request.status == "Pending"
            color = "yellow"
          elsif request.status == "Offer made"
            color = "blue"
          elsif request.status == "Offer accepted"
            color = "green"
          else
            color = "red"
          end %>

          <%= link_to request_received_path(request) do %>
            <div class="line <%= pair_or_impair %> <%= params[:id].to_i == request.id ? "line-active" : "" %>">
              <p class="col1-size"><%= request.title %></p>
              <p class="col2-size"><%= request.user.first_name %></p>

              <% x = (Date.today - request.updated_at.to_date).to_i %>
              <% if x == 0
                update = "Today"
              elsif x == 1
                update = "Yesterday"
              elsif x <= 30
                update = "#{x} days ago"
              else
                update = request.updated_at.strftime("%B %d, %Y")
              end %>

              <p class="col3-size"><%= update %></p>

              <div class="col4-size d-flex justify-content-end">
                <p class="status-tag <%= color %>"><%= request.status %></p>
              </div>
            </div>

          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
